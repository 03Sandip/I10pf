<!-- partials/articles.html -->
<section class="container section" id="articles-section">
  <h3 class="section-title">Latest Articles</h3>

  <div class="article-slider" id="articleSlider" aria-roledescription="carousel">
    <div class="slider-viewport">
      <div class="slider-track" id="sliderTrack" aria-live="polite"></div>
    </div>

    <button class="arrow left" id="prevArticle" aria-label="Previous article">&#9664;</button>
    <button class="arrow right" id="nextArticle" aria-label="Next article">&#9654;</button>

    <div class="dots" id="sliderDots" aria-hidden="false"></div>
  </div>

  <!-- Modal for full article -->
  <div class="article-modal-backdrop" id="articleModalBackdrop" role="dialog" aria-modal="true" style="display:none;">
    <div class="article-modal" role="document">
      <button id="closeArticleModal" class="close-btn" aria-label="Close">✕</button>
      <h2 id="modalArticleTitle" class="modal-title"></h2>
      <div id="modalArticleDate" class="modal-date"></div>
      <div id="modalArticleImage" class="modal-image"></div>
      <div id="modalArticleBody" class="modal-body"></div>
    </div>
  </div>
</section>

<!-- Article data file (RELATIVE path – GitHub Pages safe) -->
<script src="./js/articles.js"></script>

<!-- Initialization script -->
<script>
(function initArticlesPartial(){
  const list = window.articles || [];
  const track = document.getElementById('sliderTrack');
  const dotsWrap = document.getElementById('sliderDots');
  const prevBtn = document.getElementById('prevArticle');
  const nextBtn = document.getElementById('nextArticle');

  if(!track) return;

  if(!list.length) {
    track.innerHTML = '<div style="padding:18px;font-style:italic;color:#666">No articles found. Edit js/articles.js to add articles.</div>';
    return;
  }

  const escapeHtml = (text) => (!text ? '' : String(text).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])));
  const wordsSlice = (t, s=0, e) => { if(!t) return ''; const w = t.split(/\s+/); return w.slice(s,e).join(' '); };
  const snippet = (str,len) => str ? (str.length > len ? str.slice(0,len).trim() + '…' : str) : '';

  track.innerHTML = '';
  dotsWrap.innerHTML = '';

  list.forEach((article, idx) => {
    const card = document.createElement('div');
    card.className = 'article-card';
    card.dataset.index = idx;
    card.innerHTML = `
      <div class="thumb"><img src="${escapeHtml(article.image||'')}" alt="${escapeHtml(article.title||'')}"></div>
      <div class="info">
        <div class="article-date">${escapeHtml(article.date||'')}</div>
        <h3 class="article-title">
          <span class="hl-yellow">${escapeHtml(wordsSlice(article.title,0,3))}</span>
          <span class="hl-blue">${escapeHtml(wordsSlice(article.title,3))}</span>
        </h3>
        <p class="article-excerpt">${escapeHtml(article.excerpt || snippet(article.content||'', 160))}</p>
        <button class="read-btn" data-id="${idx}">Read More</button>
      </div>
    `;
    track.appendChild(card);

    const dot = document.createElement('div');
    dot.className = 'dot';
    dot.dataset.id = idx;
    dotsWrap.appendChild(dot);
  });

  let index = 0;
  const cards = Array.from(track.children);
  const total = cards.length;

  function update(){
    const cardWidth = cards[0]?.getBoundingClientRect().width || 760;
    track.style.transform = `translateX(-${index * (cardWidth + 20)}px)`;
    dotsWrap.querySelectorAll('.dot').forEach(d => d.classList.toggle('active', +d.dataset.id === index));
  }

  prevBtn?.addEventListener('click', ()=> { index = (index - 1 + total) % total; update(); });
  nextBtn?.addEventListener('click', ()=> { index = (index + 1) % total; update(); });

  update();
})();
</script>

<style>
/* (UNCHANGED – your CSS is already correct) */
</style>
